(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[851],{6469:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gifs",function(){return t(8652)}])},46:function(e,n,t){"use strict";t.d(n,{Z:function(){return _}});var r=t(5893),s=t(9008),i=t.n(s),a=t(7294),o=t(4946),c=t.n(o),u=t(3272),l=t(1664),d=t.n(l),f=t(4301),h=function(){var e=(0,a.useState)(!1),n=e[0],t=e[1];return(0,a.useEffect)(function(){f.M.Instance.web3Objects.subscribe(function(e){t(e.connected)})},[]),(0,r.jsxs)(u.Z,{className:c().shadow_nav,children:[(0,r.jsx)(d(),{href:"/",children:(0,r.jsx)(u.Z.Item,{header:!0,children:"Portal GIF"})}),(0,r.jsx)(u.Z.Menu,{position:"right",children:(0,r.jsx)(u.Z.Item,{className:n?c().text_color_menu_on:c().text_color_menu_off,name:n?"Conectado":"Desconectado"})})]})},_=function(e){return(0,r.jsxs)("div",{children:[(0,r.jsx)(i(),{children:(0,r.jsx)("title",{children:"Portal GIF"})}),(0,r.jsx)(h,{}),e.children]})}},4301:function(e,n,t){"use strict";t.d(n,{M:function(){return f}});var r=t(7568),s=t(1438),i=t(2951),a=t(655),o=t(4128),c=JSON.parse('{"version":"0.1.0","name":"gif_project","instructions":[{"name":"initialize","accounts":[{"name":"baseAccount","isMut":true,"isSigner":true},{"name":"user","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"addGif","accounts":[{"name":"baseAccount","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":true}],"args":[{"name":"gifLink","type":"string"}]},{"name":"voteGif","accounts":[{"name":"baseAccount","isMut":true,"isSigner":false}],"args":[{"name":"indexGif","type":"u16"}]}],"accounts":[{"name":"BaseAccount","type":{"kind":"struct","fields":[{"name":"totalGifs","type":"u64"},{"name":"gifList","type":{"vec":{"defined":"ItemStruct"}}}]}}],"types":[{"name":"ItemStruct","type":{"kind":"struct","fields":[{"name":"gifLink","type":"string"},{"name":"userAddress","type":"publicKey"},{"name":"votes","type":"u128"}]}}],"metadata":{"address":"8AHx4FJEq4dya3mBHdBajfpTL69MRjUTzzpD8Dwm9uR"}}'),u=t(9917),l=t(4758),d=JSON.parse('{"_":{"r":{"0":0,"1":30,"2":254,"3":54,"4":40,"5":150,"6":209,"7":186,"8":0,"9":120,"10":165,"11":192,"12":31,"13":23,"14":235,"15":95,"16":177,"17":123,"18":71,"19":118,"20":173,"21":90,"22":207,"23":238,"24":128,"25":7,"26":188,"27":120,"28":190,"29":15,"30":122,"31":254,"32":0,"33":73,"34":216,"35":174,"36":69,"37":228,"38":180,"39":77,"40":81,"41":86,"42":108,"43":137,"44":206,"45":249,"46":25,"47":123,"48":147,"49":245,"50":29,"51":38,"52":30,"53":89,"54":48,"55":183,"56":208,"57":132,"58":112,"59":165,"60":132,"61":221,"62":172,"63":208}}}'),f=function(){function e(){(0,s.Z)(this,e),this.web3Objects=new o.X({connected:!1,solanaWallet:void 0}),this._systemProgram=l.rV.SystemProgram,this._baseAccount=this.getBaseAccount(),this._programID=new u.PublicKey(c.metadata.address),this._network=(0,u.clusterApiUrl)("devnet"),this._opts={preflightCommitment:"processed"}}var n=e.prototype;return n.init=function(e){var n=this;return(0,r.Z)(function(){var t;return(0,a.__generator)(this,function(r){switch(r.label){case 0:return n._solana=e,t=new u.Connection(n._network,n._opts.preflightCommitment),n._provider=new l.Y7(t,e,n._opts.preflightCommitment),[4,e.connect()];case 1:return n._solanaWallet=r.sent(),n.web3Objects.next({connected:!0,solanaWallet:n._solanaWallet}),n._program=n.getProgram(),[2]}})})()},n.addGif=function(e){var n=this;return(0,r.Z)(function(){return(0,a.__generator)(this,function(t){switch(t.label){case 0:return[4,n._program.methods.addGif(e).accounts({baseAccount:n._baseAccount.publicKey,user:n._provider.wallet.publicKey}).rpc()];case 1:return t.sent(),console.log("GIF enviado com sucesso para o programa",e),[2]}})})()},n.voteGif=function(e){var n=this;return(0,r.Z)(function(){return(0,a.__generator)(this,function(t){switch(t.label){case 0:return[4,n._program.methods.voteGif(e).accounts({baseAccount:n._baseAccount.publicKey}).rpc()];case 1:return t.sent(),[2]}})})()},n.getGifList=function(){var e=this;return(0,r.Z)(function(){return(0,a.__generator)(this,function(n){switch(n.label){case 0:return[4,e._program.account.baseAccount.fetch(e._baseAccount.publicKey)];case 1:return[2,n.sent()]}})})()},n.getBaseAccount=function(){var e=Object.values(d._.r),n=new Uint8Array(e);return l.rV.Keypair.fromSecretKey(n)},n.getProgram=function(){return new l.$r(c,this._programID,this._provider)},(0,i.Z)(e,[{key:"GetProvider",get:function(){if(this._solana)return this._provider;throw"Init not called yet!"}},{key:"SolanaWallet",get:function(){if(this._solana)return this._solanaWallet;throw"Init not called yet!"}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new e)}}]),e}()},8652:function(e,n,t){"use strict";t.r(n);var r=t(7568),s=t(1351),i=t(655),a=t(5893),o=t(7294),c=t(2256),u=t(650),l=t(5150),d=t(5712),f=t(8005),h=t(5424),_=t(416),m=t(967),p=t(46),g=t(4301),x=t(7852),v=t.n(x),j=function(e){var e=null!==e?e:(0,s.Z)(TypeError("Cannot destructure undefined")),n=(0,o.useState)(""),t=n[0],x=n[1],j=(0,o.useState)(Array),b=j[0],Z=j[1];(0,o.useEffect)(function(){g.M.Instance.SolanaWallet&&A()},[]);var w,y,G=function(e){x(e.target.value)},A=(w=(0,r.Z)(function(){var e,n;return(0,i.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,g.M.Instance.getGifList()];case 1:return e=t.sent(),console.log("Conta obtida",e),Z(e.gifList),[3,3];case 2:return n=t.sent(),console.log("Erro em getGifList",n),Z([]),[3,3];case 3:return[2]}})}),function(){return w.apply(this,arguments)}),I=(y=(0,r.Z)(function(){return(0,i.__generator)(this,function(e){switch(e.label){case 0:if(!(t.length>0))return[3,3];return x(""),console.log("Link do GIF:",t),[4,g.M.Instance.addGif(t)];case 1:return e.sent(),console.log("GIF enviado com sucesso para o programa",t),[4,A()];case 2:return e.sent(),[3,4];case 3:console.log("Input vazio. Tente novamente."),e.label=4;case 4:return[2]}})}),function(){return y.apply(this,arguments)}),S=function(e,n){var t;return(0,a.jsxs)(c.Z,{fluid:!0,children:[(0,a.jsx)(u.Z,{alt:e.gifLink,src:e.gifLink,wrapped:!0,ui:!1}),(0,a.jsxs)(c.Z.Content,{children:[(0,a.jsx)(c.Z.Meta,{children:(0,a.jsx)("span",{className:"date",children:"Added by"})}),(0,a.jsx)(c.Z.Description,{children:(0,a.jsx)("label",{className:v().description_address,children:e.userAddress.toString()})})]}),(0,a.jsxs)(c.Z.Content,{extra:!0,children:[(0,a.jsx)("a",{onClick:(0,r.Z)(function(){return(0,i.__generator)(this,function(e){switch(e.label){case 0:return[4,g.M.Instance.voteGif(n)];case 1:return e.sent(),console.log("Vota\xe7\xe3o enviada para o GIF",n),[4,A()];case 2:return e.sent(),[2]}})}),children:(0,a.jsx)(l.Z,{name:"like"})}),e.votes.toString()," Likes"]})]})};return(0,a.jsx)(p.Z,{children:(0,a.jsx)(d.Z,{children:(0,a.jsx)(f.Z,{children:(0,a.jsx)(f.Z.Row,{children:(0,a.jsxs)(f.Z.Column,{children:[(0,a.jsx)("h1",{children:"Adicione seus Gifs favoritos."}),(0,a.jsx)(h.Z,{onSubmit:function(e){e.preventDefault(),I()},children:(0,a.jsxs)(f.Z,{children:[(0,a.jsxs)(f.Z.Row,{children:[(0,a.jsx)(f.Z.Column,{width:13,children:(0,a.jsx)(h.Z.Field,{children:(0,a.jsx)(_.Z,{value:t,onChange:G,placeholder:"Url do gif..."})})}),(0,a.jsx)(f.Z.Column,{width:3,children:(0,a.jsx)(m.Z,{fluid:!0,type:"submit",children:"Enviar"})})]}),(0,a.jsx)(f.Z.Row,{children:(0,a.jsx)(f.Z.Column,{children:(0,a.jsx)(f.Z,{columns:3,children:b.map(function(e,n){return(0,a.jsx)(f.Z.Column,{children:S(e,n)},n)})})})})]})})]})})})})})};n.default=j},4946:function(e){e.exports={shadow_nav:"Navbar_shadow_nav__dgQ_c",text_color_menu_on:"Navbar_text_color_menu_on__N39PC",text_color_menu_off:"Navbar_text_color_menu_off__Hnmja"}},7852:function(e){e.exports={description_address:"Gifs_description_address__etchs"}},7420:function(){},5856:function(){},6601:function(){}},function(e){e.O(0,[766,655,796,723,774,888,179],function(){return e(e.s=6469)}),_N_E=e.O()}]);